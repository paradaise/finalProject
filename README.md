# Sound Sentinel

**–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–≤—É–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**

## üìã –û–±–∑–æ—Ä

Sound Sentinel - —ç—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–≤—É–∫–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Raspberry Pi –≤ –∫–∞—á–µ—Å—Ç–≤–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    WiFi/Network    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    HTTP/WebSocket    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Raspberry Pi  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ   API Server    ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ   Web Client    ‚îÇ
‚îÇ   (Audio Client)‚îÇ                    ‚îÇ  (FastAPI + DB) ‚îÇ                    ‚îÇ   (React + TS)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                                      ‚îÇ                                      ‚îÇ
        ‚îÇ 1. –ó–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ                      ‚îÇ 2. –î–µ—Ç–µ–∫—Ü–∏—è –∑–≤—É–∫–∞                   ‚îÇ 3. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        ‚îÇ 2. –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä                ‚îÇ 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î                  ‚îÇ 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        ‚îÇ 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥                  ‚îÇ 4. WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è             ‚îÇ 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∏
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –¥–µ—Ç–µ–∫—Ü–∏–∏ –∑–≤—É–∫–æ–≤

### 1. –ó–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ –Ω–∞ Raspberry Pi

```python
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞—Ö–≤–∞—Ç–∞
SAMPLE_RATE = 16000 Hz     # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ –¥–ª—è YAMNet
CHANNELS = 1               # –ú–æ–Ω–æ
CHUNK_DURATION = 3 —Å–µ–∫     # –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–∞–Ω–∫–∞
FORMAT = Float32           # –§–æ—Ä–º–∞—Ç —Å—ç–º–ø–ª–æ–≤
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞

```python
# –¶–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏
while is_running:
    audio_data = capture_audio_chunk()      # –ó–∞—Ö–≤–∞—Ç 3-—Å–µ–∫—É–Ω–¥–Ω–æ–≥–æ —á–∞–Ω–∫–∞
    resampled = resample_to_16000(audio)     # –†–µ—Å–µ–º–ø–ª–∏–Ω–≥ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    send_to_server(resampled)               # HTTP POST –Ω–∞ API
    sleep(3)                                # –ü–∞—É–∑–∞ –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏
```

### 3. –î–µ—Ç–µ–∫—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```python
# YAMNet –¥–µ—Ç–µ–∫—Ü–∏—è
def detect_sound(audio_data):
    embeddings = yamnet(audio_data)         # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
    predictions = classifier(embeddings)     # –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
    return top_predictions(predictions)      # –¢–æ–ø-5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

## üåê –ü—Ä–æ—Ç–æ–∫–æ–ª—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

### HTTP API

- `POST /register_device` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `POST /detect_sound` - –î–µ—Ç–µ–∫—Ü–∏—è –∑–≤—É–∫–∞
- `GET /devices` - –°–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- `DELETE /devices/{id}` - –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `GET /detections/{device_id}` - –ò—Å—Ç–æ—Ä–∏—è –¥–µ—Ç–µ–∫—Ü–∏–π

### WebSocket

- `ws://server:8000/ws` - –†–µ–∞–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –°–æ–±—ã—Ç–∏—è: `device_registered`, `device_deleted`, `sound_detected`

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite)

```sql
CREATE TABLE devices (
    id TEXT PRIMARY KEY,                    -- UUID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    name TEXT NOT NULL,                      -- –ò–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    ip_address TEXT NOT NULL,               -- IP –∞–¥—Ä–µ—Å
    mac_address TEXT NOT NULL,              -- MAC –∞–¥—Ä–µ—Å
    model TEXT DEFAULT 'Unknown',           -- –ú–æ–¥–µ–ª—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    model_image_url TEXT,                    -- URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–¥–µ–ª–∏
    microphone_info TEXT,                   -- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∏–∫—Ä–æ—Ñ–æ–Ω–µ
    wifi_signal INTEGER DEFAULT 0,          -- –°–∏–≥–Ω–∞–ª WiFi (%)
    status TEXT DEFAULT 'offline',          -- –°—Ç–∞—Ç—É—Å
    last_seen TEXT,                          -- –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
    created_at TEXT DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE sound_detections (
    id TEXT PRIMARY KEY,                    -- UUID –¥–µ—Ç–µ–∫—Ü–∏–∏
    device_id TEXT NOT NULL,                -- ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    sound_type TEXT NOT NULL,               -- –¢–∏–ø –∑–≤—É–∫–∞
    confidence REAL NOT NULL,               -- –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (0-1)
    timestamp TEXT NOT NULL,                -- –í—Ä–µ–º—è –¥–µ—Ç–µ–∫—Ü–∏–∏
    mfcc_features TEXT,                     -- MFCC –ø—Ä–∏–∑–Ω–∞–∫–∏ (JSON)
    FOREIGN KEY (device_id) REFERENCES devices(id)
);

CREATE TABLE custom_sounds (
    id TEXT PRIMARY KEY,                    -- UUID –∑–≤—É–∫–∞
    name TEXT NOT NULL,                      -- –ù–∞–∑–≤–∞–Ω–∏–µ
    sound_type TEXT NOT NULL,               -- –¢–∏–ø (excluded/important)
    mfcc_features TEXT NOT NULL,           -- MFCC –ø—Ä–∏–∑–Ω–∞–∫–∏
    device_id TEXT NOT NULL,                -- ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    created_at TEXT DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (device_id) REFERENCES devices(id)
);
```

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã YAMNet –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

YAMNet –æ–±—É—á–µ–Ω –Ω–∞ **AudioSet-YouTube** –¥–∞—Ç–∞—Å–µ—Ç–µ –∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç **521 –∫–ª–∞—Å—Å –∑–≤—É–∫–æ–≤**:

### üîä –ß–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–µ –∑–≤—É–∫–∏

- `Speech`, `Laughter`, `Crying baby`, `Sneeze`, `Cough`
- `Footsteps`, `Clapping`, `Finger snapping`

### üéµ –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- `Piano`, `Guitar`, `Violin`, `Drums`, `Flute`
- `Singing`, `Whistling`, `Humming`

### üè† –ë—ã—Ç–æ–≤—ã–µ –∑–≤—É–∫–∏

- `Doorbell`, `Telephone bell ringing`, `Alarm`
- `Microwave oven`, `Dishwasher`, `Vacuum cleaner`
- `Typing`, `Computer keyboard`, `Mouse click`

### üöñ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∏ —É–ª–∏—Ü–∞

- `Car horn`, `Siren`, `Traffic noise`, `Train`
- `Airplane`, `Helicopter`, `Boat`

### üåø –ü—Ä–∏—Ä–æ–¥–∞

- `Bird`, `Dog`, `Cat`, `Insect`, `Wind`
- `Rain`, `Thunder`, `Water`, `Fire`

### üè≠ –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–µ

- `Power tool`, `Drill`, `Saw`, `Hammer`
- `Engine`, `Generator`, `Machinery`

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend

- **FastAPI** - –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ API
- **SQLite** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **TensorFlow** - –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
- **YAMNet** - –ú–æ–¥–µ–ª—å –¥–µ—Ç–µ–∫—Ü–∏–∏ –∑–≤—É–∫–æ–≤
- **WebSocket** - –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è

### Frontend

- **React 18** - UI —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **TypeScript** - –¢–∏–ø–∏–∑–∞—Ü–∏—è
- **TailwindCSS** - –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- **Lucide** - –ò–∫–æ–Ω–∫–∏

### Client (Raspberry Pi)

- **Python 3.9+** - –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- **PyAudio** - –ó–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ
- **NumPy** - –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **Requests** - HTTP –∫–ª–∏–µ–Ω—Ç

## üìä –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        SOUND SENTINEL                           ‚îÇ
‚îÇ                        DATABASE SCHEMA                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     DEVICES     ‚îÇ    ‚îÇ SOUND_DETECTIONS‚îÇ    ‚îÇ  CUSTOM_SOUNDS  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)         ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚î§ device_id (FK) ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚î§ device_id (FK) ‚îÇ
‚îÇ name            ‚îÇ    ‚îÇ id (PK)         ‚îÇ    ‚îÇ id (PK)         ‚îÇ
‚îÇ ip_address      ‚îÇ    ‚îÇ sound_type      ‚îÇ    ‚îÇ name            ‚îÇ
‚îÇ mac_address     ‚îÇ    ‚îÇ confidence      ‚îÇ    ‚îÇ sound_type      ‚îÇ
‚îÇ model           ‚îÇ    ‚îÇ timestamp       ‚îÇ    ‚îÇ mfcc_features   ‚îÇ
‚îÇ model_image_url ‚îÇ    ‚îÇ mfcc_features   ‚îÇ    ‚îÇ created_at      ‚îÇ
‚îÇ microphone_info ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ wifi_signal     ‚îÇ
‚îÇ status          ‚îÇ
‚îÇ last_seen       ‚îÇ
‚îÇ created_at      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd mvp_sound_sentinel/api_server
pip install -r requirements.txt
python main.py
```

### 2. –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

```bash
cd mvp_sound_sentinel/mobile_app
npm install
npm run dev
```

### 3. –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ Raspberry Pi

```bash
cd mvp_sound_sentinel/raspberry_pi
pip install -r requirements.txt
python audio_client.py
```

## üì± API –†—É—á–∫–∏

### –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

```http
POST /register_device
Content-Type: application/json

{
  "name": "Raspberry Pi Monitor",
  "ip_address": "192.168.0.228",
  "mac_address": "68:a2:8b:2c:b1:c6",
  "model": "Raspberry Pi Zero 2 W Rev 1.0",
  "model_image_url": "/images/raspberry-pi-zero-2-w.png",
  "microphone_info": "Microphone [Fifine Microphone], device 0",
  "wifi_signal": 82
}
```

```http
GET /devices
Response: [
  {
    "id": "9619ab8b-35e6-41f9-b54c-cfa7bfe3c614",
    "name": "Raspberry Pi Monitor",
    "status": "online",
    "last_seen": "2026-01-25T20:15:30.123456",
    ...
  }
]
```

### –î–µ—Ç–µ–∫—Ü–∏–∏

```http
POST /detect_sound
Content-Type: application/json

{
  "device_id": "9619ab8b-35e6-41f9-b54c-cfa7bfe3c614",
  "audio_data": [0.1, -0.2, 0.3, ...],
  "sample_rate": 16000
}

Response: {
  "detection_id": "abc123...",
  "sound_type": "Speech",
  "confidence": 0.85,
  "all_predictions": [...]
}
```

## üéõÔ∏è WebSocket —Å–æ–±—ã—Ç–∏—è

```javascript
// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
const ws = new WebSocket('ws://192.168.0.61:8000/ws');

// –ù–æ–≤–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è
{
  "type": "sound_detected",
  "device_id": "9619ab8b-35e6-41f9-b54c-cfa7bfe3c614",
  "sound_type": "Speech",
  "confidence": 0.85,
  "timestamp": "2026-01-25T20:15:30.123456"
}

// –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ
{
  "type": "device_registered",
  "device_id": "9619ab8b-35e6-41f9-b54c-cfa7bfe3c614",
  "name": "Raspberry Pi Monitor",
  "status": "online"
}
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Raspberry Pi Client

```python
# audio_client.py
API_SERVER_URL = "http://192.168.0.61:8000"
SAMPLE_RATE = 16000
CHUNK_DURATION = 3  # —Å–µ–∫—É–Ω–¥—ã
```

### API Server

```python
# main.py
DB_PATH = "sound_sentinel.db"
MODEL_PATH = "yamnet.h5"
CONFIDENCE_THRESHOLD = 0.3
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ –∫–ª–∏–µ–Ω—Ç–∞

```bash
# –£—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–µ–∫—Ü–∏–∏
üéµ [20:15:30] Speech: 85.2%
üéµ [20:15:33] Keyboard typing: 72.1%
üéµ [20:15:36] Background noise (–Ω–∏–∂–µ –ø–æ—Ä–æ–≥–∞)
```

### –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

```bash
‚úÖ –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ: Raspberry Pi Monitor
üîÑ –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ: Raspberry Pi Monitor
üéµ –î–µ—Ç–µ–∫—Ü–∏—è: Speech (85.2%) –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ 9619ab8b...
```

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### MFCC –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ

```python
def extract_mfcc(audio_data, sample_rate=16000, n_mfcc=13):
    # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ 13 MFCC –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤
    mfcc = librosa.feature.mfcc(y=audio_data, sr=sample_rate, n_mfcc=n_mfcc)
    # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
    mfcc = (mfcc - np.mean(mfcc)) / np.std(mfcc)
    return mfcc.T.tolist()  # –¢—Ä–∞–Ω—Å–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
```

### –†–µ—Å–µ–º–ø–ª–∏–Ω–≥ –∞—É–¥–∏–æ

```python
def resample_audio(audio_data, original_rate, target_rate=16000):
    if original_rate != target_rate:
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º librosa –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ä–µ—Å–µ–º–ø–ª–∏–Ω–≥–∞
        return librosa.resample(audio_data, orig_sr=original_rate, target_sr=target_rate)
    return audio_data
```

### WebSocket broadcast

```python
async def broadcast_to_websockets(message: dict):
    if websocket_connections:
        message_str = json.dumps(message)
        for websocket in websocket_connections.copy():
            try:
                await websocket.send_text(message_str)
            except:
                websocket_connections.discard(websocket)
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **CORS** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **SQL Injection** –∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- **Rate limiting** –¥–ª—è API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∞—É–¥–∏–æ –Ω–∞ Raspberry Pi

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
sudo systemctl stop pulseaudio
sudo pkill -f pulseaudio
sudo alsa force-reload

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
arecord -l
python3 -c "import pyaudio; p=pyaudio.PyAudio(); [print(f'[{i}] {p.get_device_info_by_index(i)[\"name\"]}') for i in range(p.get_device_count()) if p.get_device_info_by_index(i)['maxInputChannels']>0]"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ping 192.168.0.61
curl -X POST http://192.168.0.61:8000/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ WebSocket
wscat -c ws://192.168.0.61:8000/ws
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è

---

**Sound Sentinel** - –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –ª—é–±–æ–π Raspberry Pi –≤ —É–º–Ω—É—é —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–≤—É–∫–æ–≤! üéôÔ∏èüîä
